# LiveKit 部署环境配置文件
# 复制此文件为 .env 并根据需要修改
#
# 部署方式说明：
#   - 单机部署：在一台机器上部署，NODES 配置为该机器的 IP 或 localhost
#   - 分布式部署：在多台机器上部署，NODES 配置为所有机器的 IP 列表
#
# 示例：
#   单机：NODES=localhost
#   分布式：NODES=192.168.1.10,192.168.1.11,192.168.1.12

################################################################################
# 基本配置
################################################################################

# 域名（必需）
DOMAIN=livekit.example.com

# 部署目录
DEPLOYMENT_DIR=./livekit-deployment

# 节点列表（逗号分隔的 IP 地址或主机名）
# 单机部署：localhost 或 127.0.0.1
# 分布式部署：node1.example.com,node2.example.com,node3.example.com
NODES=localhost

################################################################################
# API 配置
################################################################################

# API 密钥（如果为空，脚本会自动生成）
LIVEKIT_API_KEY=

# API 密钥密码（如果为空，脚本会自动生成）
LIVEKIT_API_SECRET=

################################################################################
# Redis 配置
################################################################################

# Redis 主机
REDIS_HOST=redis

# Redis 端口
REDIS_PORT=6379

# Redis 密码（可选）
REDIS_PASSWORD=

# Redis 数据库编号
REDIS_DB=0

# Redis 最大内存
REDIS_MAXMEMORY=2gb

# Redis 内存淘汰策略
REDIS_MAXMEMORY_POLICY=allkeys-lru

################################################################################
# LiveKit 服务器配置
################################################################################

# 监听端口
LIVEKIT_PORT=7880

# 绑定地址
LIVEKIT_BIND_ADDRESS=0.0.0.0

# 开发模式（true/false）
LIVEKIT_DEVELOPMENT=false

# 日志级别: debug, info, warn, error
LIVEKIT_LOG_LEVEL=info

# 房间自动创建
LIVEKIT_AUTO_CREATE_ROOM=true

# 空房间超时时间（秒）
LIVEKIT_EMPTY_TIMEOUT=300

# 最大参与者数（0 表示无限制）
LIVEKIT_MAX_PARTICIPANTS=0

# 邀请超时时间（秒）
LIVEKIT_TIMEOUT=3600

################################################################################
# API 服务配置
################################################################################

# 参与者超时检查间隔（秒）
PARTICIPANT_TIMEOUT_CHECK_INTERVAL=10

################################################################################
# TURN 服务器配置
################################################################################

# 启用 TURN
TURN_ENABLED=true

# TURN 域名
TURN_DOMAIN=${DOMAIN}

# TURN 外部 TLS 端口
TURN_EXTERNAL_TLS_PORT=443

# TURN 外部 UDP 端口
TURN_EXTERNAL_UDP_PORT=3478

################################################################################
# Nginx 配置
################################################################################

# Nginx 管理员邮箱（用于 Let's Encrypt 证书）
NGINX_ADMIN_EMAIL=admin@${DOMAIN}

# Nginx 日志级别
NGINX_LOG_LEVEL=info

################################################################################
# Docker 配置
################################################################################

# Docker 镜像版本
LIVEKIT_IMAGE_VERSION=latest

# Redis 镜像版本
REDIS_IMAGE_VERSION=7-alpine

# Nginx 镜像版本
NGINX_IMAGE_VERSION=alpine

# Certbot 镜像版本
CERTBOT_IMAGE_VERSION=latest

# Docker 网络名称
DOCKER_NETWORK_NAME=livekit



################################################################################
# 备份配置
################################################################################

# 备份目录
BACKUP_DIR=./livekit-deployment/backups

# 自动备份间隔（小时）
AUTO_BACKUP_INTERVAL=24

# 保留备份数量
BACKUP_RETENTION_COUNT=7

################################################################################
# 监控配置
################################################################################

# 启用监控
MONITORING_ENABLED=true

# 监控间隔（秒）
MONITORING_INTERVAL=60

# 日志保留天数
LOG_RETENTION_DAYS=30

################################################################################
# 性能调优
################################################################################

# Goroutine 数量（0 表示自动）
NUM_GOROUTINES=0

# 使用外部 IP 作为候选地址
USE_EXTERNAL_IP_FOR_CANDIDATES=false

# TCP 连接数限制
NUM_TCP_CONNS=100

# UDP 连接数限制
NUM_UDP_CONNS=100

################################################################################
# 音频配置
################################################################################

# 音频采样率
AUDIO_FREQUENCY=48000

# 音频通道数
AUDIO_NUM_CHANNELS=2

# 每帧样本数
AUDIO_SAMPLES_PER_FRAME=960

################################################################################
# 视频配置
################################################################################

# 视频帧率
VIDEO_FRAMERATE=30

# 视频宽度
VIDEO_WIDTH=1280

# 视频高度
VIDEO_HEIGHT=720

################################################################################
# 业务 Webhook 配置（通知其他服务）
################################################################################

# 业务 webhook URLs（支持多个地址，用逗号分隔；如果为空则不发送 webhook）
# 示例: http://localhost:9000/webhook,http://localhost:9001/webhook
BUSINESS_WEBHOOK_URLS=

# 业务 webhook 签名密钥（用于 HMAC-SHA256 签名）
BUSINESS_WEBHOOK_SECRET=your_webhook_secret

# 业务 webhook 请求超时时间（秒，默认 10 秒）
BUSINESS_WEBHOOK_TIMEOUT=10

# 业务 webhook 日志清理配置
# 启用日志自动清理（true/false）
BUSINESS_WEBHOOK_LOG_CLEANUP_ENABLED=true

# 日志保留天数（默认 30 天）
BUSINESS_WEBHOOK_LOG_RETENTION_DAYS=30

# 日志清理间隔（秒，默认 86400 = 1 天）
BUSINESS_WEBHOOK_LOG_CLEANUP_INTERVAL=86400

################################################################################
# 邮件通知配置（可选）
################################################################################

# SMTP 服务器
SMTP_SERVER=

# SMTP 端口
SMTP_PORT=587

# SMTP 用户名
SMTP_USERNAME=

# SMTP 密码
SMTP_PASSWORD=

# 通知邮箱
NOTIFICATION_EMAIL=

################################################################################
# 其他配置
################################################################################

# 时区
TZ=UTC

# 语言
LANG=en_US.UTF-8

# 调试模式
DEBUG=false

